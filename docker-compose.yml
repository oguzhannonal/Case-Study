version: '3.8'

services:
    nodejs-backend:
        build: ./nodejs-backend
        depends_on:
            - postgres
        ports: 
            - 5000:5000
        
        
    gameflex-vue:
        build: ./gameflex-vue
        depends_on:
    
            - postgres
        ports: 
            - 3000:3000
    postgres:
      image: postgres:14.1-alpine
      restart: always
      environment:
      # You can set the value of environment variables
      # in your docker-compose.yml file
      # Our Node app will use these to connect
      # to the database
        - POSTGRES_USER=postgres
        - POSTGRES_PASSWORD=65953900
        - POSTGRES_DB=gameflex
      ports:
      # Standard port for PostgreSQL databases
        - "5432:5432"
      volumes:
      # When the PostgreSQL container is started it will run any scripts
      # provided in the `docker-entrypoint-initdb.d` directory, this connects
      # our seed file to that directory so that it gets run
        - ./database-seed.sql:/docker-entrypoint-initdb.d/database-seed.sql